{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport '../css/timer.css';\n\nconst addFont = document.head.insertAdjacentHTML(\n  'beforeend',\n  '<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\"><link rel=\"preconnect\" href=\"https://fonts.gstatic.com\" crossorigin><link href=\"https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap\" rel=\"stylesheet\"></link>'\n);\n\nlet userSelectedDate = null;\n\nconst timerElements = {\n  inputDate: document.querySelector('#datetime-picker'),\n  startBtn: document.querySelector('button[data-start]'),\n  spanDay: document.querySelector('span[data-days]'),\n  spanHours: document.querySelector('span[data-hours]'),\n  spanMinutes: document.querySelector('span[data-minutes]'),\n  spanSeconds: document.querySelector('span[data-seconds]'),\n};\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    const dateLater = selectedDates[0].getTime();\n    const dateNow = options.defaultDate.getTime();\n    if (dateLater <= dateNow) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please choose a date in the future',\n      });\n      timerElements.startBtn.disabled = true;\n    } else {\n      userSelectedDate = selectedDates[0].getTime();\n      timerElements.startBtn.disabled = false;\n    }\n  },\n};\n\nflatpickr(timerElements.inputDate, options);\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\ntimerElements.startBtn.addEventListener('click', () => {\n  const currentDate = new Date();\n  const deltaTime = userSelectedDate - currentDate;\n  console.log(deltaTime);\n  startTimer(deltaTime);\n});\n\nfunction startTimer(deltaTime) {\n  timerElements.inputDate.disabled = true;\n  timerElements.startBtn.disabled = true;\n  const intervarId = setInterval(() => {\n    const { days, hours, minutes, seconds } = convertMs(deltaTime);\n    timerElements.spanDay.textContent = addLeadingZero(days);\n    timerElements.spanHours.textContent = addLeadingZero(hours);\n    timerElements.spanMinutes.textContent = addLeadingZero(minutes);\n    timerElements.spanSeconds.textContent = addLeadingZero(seconds);\n    deltaTime -= 1000;\n    if (deltaTime < 0) {\n      clearInterval(intervarId);\n      timerElements.inputDate.disabled = false;\n      timerElements.startBtn.disabled = false;\n    }\n  }, 1000);\n}\n"],"names":["userSelectedDate","timerElements","options","selectedDates","dateLater","dateNow","iziToast","flatpickr","convertMs","ms","days","hours","minutes","seconds","addLeadingZero","value","deltaTime","startTimer","intervarId"],"mappings":"2GAMgB,SAAS,KAAK,mBAC5B,YACA,uQACF,EAEA,IAAIA,EAAmB,KAEvB,MAAMC,EAAgB,CACpB,UAAW,SAAS,cAAc,kBAAkB,EACpD,SAAU,SAAS,cAAc,oBAAoB,EACrD,QAAS,SAAS,cAAc,iBAAiB,EACjD,UAAW,SAAS,cAAc,kBAAkB,EACpD,YAAa,SAAS,cAAc,oBAAoB,EACxD,YAAa,SAAS,cAAc,oBAAoB,CAC1D,EAEMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrB,MAAMC,EAAYD,EAAc,CAAC,EAAE,QAAO,EACpCE,EAAUH,EAAQ,YAAY,QAAO,EACvCE,GAAaC,GACfC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,oCACjB,CAAO,EACDL,EAAc,SAAS,SAAW,KAElCD,EAAmBG,EAAc,CAAC,EAAE,QAAO,EAC3CF,EAAc,SAAS,SAAW,GAErC,CACH,EAEAM,EAAUN,EAAc,UAAWC,CAAO,EAE1C,SAASM,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASC,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEAd,EAAc,SAAS,iBAAiB,QAAS,IAAM,CAErD,MAAMe,EAAYhB,EADE,IAAI,KAExB,QAAQ,IAAIgB,CAAS,EACrBC,EAAWD,CAAS,CACtB,CAAC,EAED,SAASC,EAAWD,EAAW,CAC7Bf,EAAc,UAAU,SAAW,GACnCA,EAAc,SAAS,SAAW,GAClC,MAAMiB,EAAa,YAAY,IAAM,CACnC,KAAM,CAAE,KAAAR,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYL,EAAUQ,CAAS,EAC7Df,EAAc,QAAQ,YAAca,EAAeJ,CAAI,EACvDT,EAAc,UAAU,YAAca,EAAeH,CAAK,EAC1DV,EAAc,YAAY,YAAca,EAAeF,CAAO,EAC9DX,EAAc,YAAY,YAAca,EAAeD,CAAO,EAC9DG,GAAa,IACTA,EAAY,IACd,cAAcE,CAAU,EACxBjB,EAAc,UAAU,SAAW,GACnCA,EAAc,SAAS,SAAW,GAErC,EAAE,GAAI,CACT"}